<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- displays site properly based on user's device -->

  <link rel="icon" type="image/png" sizes="32x32" href="./images/favicon-32x32.png">
  <link rel="stylesheet" href="./index.css">
  
  <title>Frontend Mentor | Intro component with sign up form</title>
</head>
<body>

  <section class="wrapper">
    <section class="lead-text">
      <h1>Learn to code by watching others</h1>
      <p>See how experienced developers solve problems in real-time. Watching scripted tutorials is great, 
        but understanding how developers think is invaluable. </p>
    </section>
    <form id="sign-up-form" class="sign-up-area">
      <button class="seven-day-trial-button"><b>Try it free 7 days</b> then $20/mo. thereafter</button>
      <section class="form-area">
        <input id="form-first-name"  type="text" placeholder="First Name"/>
        <p id="error-first-name" class="error-message">First Name cannot be empty</p>
        <input id="form-last-name"  type="text" placeholder="Last Name"/>
        <p id="error-last-name" class="error-message">Last Name cannot be empty</p>
        <input id="form-email"  type="text" placeholder="Email Address"/>
        <p id="error-email" class="error-message">Looks like this is not an email</p>
        <input id="form-password"  type="password" placeholder="Password"/>
        <p id="error-password" class="error-message">Password cannot be empty</p>
        <button type="submit" class="claim-trial-button">Claim your free trial</button>
        <p class="disclaimer">By clicking the button, you are agreeing to our <b>Terms and Services</b></p>
      </section>
    </form>
  </section>
  
  <footer>
    <p class="attribution">
      Challenge by <a href="https://www.frontendmentor.io?ref=challenge" target="_blank">Frontend Mentor</a>. 
      Coded by <a href="https://github.com/ianwilk20">Ian Wilkinson</a>.
    </p>
  </footer>

</body>


<script>

  let signUpForm = document.getElementById('sign-up-form')

  let firstName = document.getElementById('form-first-name')
  let lastName = document.getElementById('form-last-name')
  let email = document.getElementById('form-email')
  let password = document.getElementById('form-password')

  let errorFirstName = document.getElementById('error-first-name')
  let errorLastName = document.getElementById('error-last-name')
  let errorEmail = document.getElementById('error-email')
  let errorPassword = document.getElementById('error-password')

  signUpForm.addEventListener("submit", (e) => {
    e.preventDefault();

    let fieldsValid = true

    // Check for empty fields
    console.log(firstName.value.trim())
    if(firstName.value.trim() == "") {
      firstName.classList.add('invalid')
      errorFirstName.classList.add('show')
      fieldsValid = false
    } else {
      firstName.classList.remove('invalid')
      errorFirstName.classList.remove('show')
    }

    if(lastName.value.trim() == "") {
      lastName.classList.add('invalid')
      errorLastName.classList.add('show')
      fieldsValid = false
    } else {
      lastName.classList.remove('invalid')
      errorLastName.classList.remove('show')
    }

    if(email.value.trim() == "" || !RegExp(/[^@\s]+@[^@\s]+\.[^@\s]+/gm).test(email.value.toLowerCase())) {
      email.classList.add('invalid')
      errorEmail.classList.add('show')
      fieldsValid = false
    } else {
      email.classList.remove('invalid')
      errorEmail.classList.remove('show')
    }

    if(password.value.trim() == "") {
      password.classList.add('invalid')
      errorPassword.classList.add('show')
      fieldsValid = false
    } else {
      password.classList.remove('invalid')
      errorPassword.classList.remove('show')
    }

    if(fieldsValid) {
      //Give suffient time to clean up UI errors if any
      setTimeout(function() {
        completeSignUp()
      }, 500)
    }

  })

  function completeSignUp() {
    alert("Thank you! You have registered for our free trial. Please check your " + email.value + " inbox to complete the sign up process.")
    firstName.value = ''
    lastName.value = ''
    email.value = ''
    password.value = ''
  }
    
</script>
</html>